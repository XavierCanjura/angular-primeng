<div class="p-4 flex flex-col gap-4">

    
    <!-- Search & Filters -->
    <p-card class="shadow-sm bg-surface-0!">
        <!-- Header -->
        <div class="flex items-center justify-between mb-4">
            <div>
                <h1 class="text-3xl font-bold text-surface-800">Products</h1>
                <p class="text-surface-400 text-sm mt-1">Manage the product catalog</p>
            </div>
            <p-button label="New Product" icon="pi pi-plus" />
        </div>
        <div class="flex items-center gap-3">
            <div class="flex-1">
                <p-iconfield class="w-full">
                    <p-inputicon class="pi pi-search" />
                    <input
                        pInputText
                        type="text"
                        placeholder="Search by name or category..."
                        class="w-full"
                        [(ngModel)]="searchTerm"
                        (input)="onSearch()"
                    />
                </p-iconfield>
            </div>
            <p-select
                [options]="categoryOptions"
                [(ngModel)]="selectedCategory"
                placeholder="All Categories"
                (onChange)="onSearch()"
                [showClear]="true"
            />
            <p-select
                [options]="statusOptions"
                [(ngModel)]="selectedStatus"
                placeholder="All Statuses"
                (onChange)="onSearch()"
                [showClear]="true"
            />
        </div>
    </p-card>

    <!-- Table -->
    <p-card class="shadow-sm bg-surface-0!">
        <p-table
            [value]="filteredProducts"
            [paginator]="true"
            [rows]="8"
            [rowsPerPageOptions]="[8, 15, 25]"
            class="p-datatable-sm"
            [rowHover]="true"
        >
            <ng-template #header>
                <tr>
                    <th pSortableColumn="name" scope="col">Name <p-sortIcon field="name" /></th>
                    <th pSortableColumn="category" scope="col">Category <p-sortIcon field="category" /></th>
                    <th pSortableColumn="price" scope="col">Price <p-sortIcon field="price" /></th>
                    <th pSortableColumn="stock" scope="col">Stock <p-sortIcon field="stock" /></th>
                    <th pSortableColumn="createdAt" scope="col">Created <p-sortIcon field="createdAt" /></th>
                    <th scope="col">Status</th>
                    <th scope="col">Actions</th>
                </tr>
            </ng-template>

            <ng-template #body let-product>
                <tr>
                    <td>
                        <div class="flex items-center gap-3">
                            <div
                                class="w-9 h-9 rounded-lg flex items-center justify-center"
                                [style]="{ background: product.iconBg }"
                            >
                                <i [class]="product.icon + ' text-white'"></i>
                            </div>
                            <span class="font-medium">{{ product.name }}</span>
                        </div>
                    </td>
                    <td class="text-surface-500">{{ product.category }}</td>
                    <td class="font-semibold">${{ product.price }}</td>
                    <td>
                        <div class="flex items-center gap-2">
                            <span [ngClass]="product.stock < 10 ? 'text-red-500 font-semibold' : 'text-surface-700'">
                                {{ product.stock }}
                            </span>
                            @if (product.stock < 10) {
                                <i class="pi pi-exclamation-triangle text-red-400 text-xs" pTooltip="Stock bajo"></i>
                            }
                        </div>
                    </td>
                    <td class="text-surface-500 text-sm">{{ product.createdAt }}</td>
                    <td>
                        <p-tag
                            [value]="product.active ? 'Active' : 'Inactive'"
                            [severity]="product.active ? 'success' : 'danger'"
                        />
                    </td>
                    <td>
                        <div class="flex gap-2">
                            <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" severity="info" pTooltip="Edit" />
                            <p-button icon="pi pi-trash" [rounded]="true" [text]="true" severity="danger" pTooltip="Delete" />
                        </div>
                    </td>
                </tr>
            </ng-template>

            <ng-template #emptymessage>
                <tr>
                    <td colspan="7" class="text-center py-10 text-surface-400">
                        <i class="pi pi-box text-4xl block mb-2"></i>
                        No products found
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>

</div>
